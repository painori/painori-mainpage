<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painori: Pi, AI, and Nori</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-functions.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì„¤ì • */
        body {
            font-family: 'Poppins', 'Noto Sans KR', sans-serif;
            background-color: #ffffff;
            color: #1f2937;
        }
        
        /* ì‹¬í”Œí•˜ê³  ì„¸ë ¨ëœ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .card {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            box-shadow: 0 10px 25px -5px rgb(0 0 0 / 0.1);
        }
        
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ - ë” ëª¨ë˜í•˜ê²Œ */
        .btn-primary {
            background-color: #f97316;
            color: white;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: all 0.2s;
            display: inline-block;
            text-decoration: none;
        }
        
        .btn-primary:hover {
            background-color: #ea580c;
            transform: translateY(-1px);
        }
        
        /* ëª¨ë°”ì¼ì—ì„œ ë²„íŠ¼ íŒ¨ë”© ì¶•ì†Œ */
        @media (max-width: 640px) {
            .btn-primary {
                padding: 0.625rem 1.25rem;
                font-size: 0.875rem;
            }
        }
        
        .btn-secondary {
            background-color: #f3f4f6;
            color: #374151;
            font-weight: 500;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: all 0.2s;
        }
        
        .btn-secondary:hover {
            background-color: #e5e7eb;
        }
        
        @media (max-width: 640px) {
            .btn-secondary {
                padding: 0.625rem 1.25rem;
                font-size: 0.875rem;
            }
        }
        
        .btn-disabled {
            background-color: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
        }
        
        @media (max-width: 640px) {
            .btn-disabled {
                padding: 0.625rem 1.25rem;
                font-size: 0.875rem;
            }
        }
        
        /* ì‘ì€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn-small {
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            border-radius: 0.25rem;
            font-weight: 500;
        }
        
        .btn-edit {
            background-color: #3b82f6;
            color: white;
        }
        
        .btn-edit:hover {
            background-color: #2563eb;
        }
        
        .btn-delete {
            background-color: #ef4444;
            color: white;
        }
        
        .btn-delete:hover {
            background-color: #dc2626;
        }
        
        /* âœ¨ ìƒˆë¡œ ì¶”ê°€: ë”ë³´ê¸° ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn-load-more {
            background-color: #6b7280;
            color: white;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
            width: 100%;
            margin-top: 1rem;
        }
        
        .btn-load-more:hover {
            background-color: #4b5563;
        }
        
        .btn-load-more:disabled {
            background-color: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
        }
        
        /* âœ¨ ìˆ˜ì •: Pi Browser ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ - íŒŒì´ ë„¤íŠ¸ì›Œí¬ ë³´ë¼ìƒ‰ìœ¼ë¡œ ë³€ê²½ */
        .btn-download {
            /* ê¸°ì¡´ ì´ˆë¡ìƒ‰ì—ì„œ Pi Network ë³´ë¼ìƒ‰ ê·¸ë¼ë°ì´ì…˜ìœ¼ë¡œ ë³€ê²½ */
            background: linear-gradient(135deg, #7C3AED, #A855F7);
            color: white;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            transition: all 0.2s;
            display: inline-block;
            text-decoration: none;
            /* Pi ë¸Œëœë“œ ìƒ‰ìƒì— ë§ëŠ” ê·¸ë¦¼ì íš¨ê³¼ ì¶”ê°€ */
            box-shadow: 0 2px 4px rgba(124, 58, 237, 0.3);
        }
        
        .btn-download:hover {
            /* í˜¸ë²„ ì‹œ ë” ì§„í•œ ë³´ë¼ìƒ‰ìœ¼ë¡œ ë³€ê²½ */
            background: linear-gradient(135deg, #6D28D9, #9333EA);
            transform: translateY(-1px);
            /* í˜¸ë²„ ì‹œ ê·¸ë¦¼ìë„ ë” ì§„í•˜ê²Œ */
            box-shadow: 0 4px 8px rgba(124, 58, 237, 0.4);
        }
        
        /* ì–¸ì–´ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .lang-btn {
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
            color: #6b7280;
            transition: color 0.2s;
        }
        
        .lang-btn:hover {
            color: #f97316;
        }
        
        .lang-btn.active {
            color: #f97316;
            font-weight: 600;
        }
        
        /* âœ¨ ê°œì„ : ë‰´ìŠ¤ ì•„ì´í…œ ìŠ¤íƒ€ì¼ - Pi ë¸”ë¡œê·¸ ì „ìš© ìŠ¤íƒ€ì¼ ì¶”ê°€ */
        .news-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            background-color: #f9fafb;
            border-radius: 0.5rem;
            transition: all 0.2s;
            margin-bottom: 0.5rem;
        }
        
        .news-item:hover {
            background-color: #f3f4f6;
            transform: translateY(-1px);
        }
        
        /* âœ¨ ìƒˆë¡œ ì¶”ê°€: Pi ë¸”ë¡œê·¸ ë‰´ìŠ¤ ì „ìš© ìŠ¤íƒ€ì¼ */
        .news-item.pi-blog {
            background: linear-gradient(135deg, #faf5ff, #f3e8ff);
            border-left: 4px solid #7c3aed;
            position: relative;
        }
        
        .news-item.pi-blog:hover {
            background: linear-gradient(135deg, #f3e8ff, #e9d5ff);
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.15);
        }
        
        .news-source {
            flex-shrink: 0;
            font-size: 0.75rem;
            font-weight: 600;
            color: #6b7280;
            width: 100px;
            text-align: center;
        }
        
        .news-source.pi-blog {
            color: #7c3aed;
            font-weight: 700;
        }
        
        .news-title {
            flex-grow: 1;
            margin-left: 1rem;
            color: #1f2937;
            font-size: 0.875rem;
            /* âœ¨ ìƒˆë¡œ ì¶”ê°€: ëª¨ë°”ì¼ ë‰´ìŠ¤ ì œëª© ê¸¸ì´ ì œí•œ */
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;  /* âœ¨ ì¶”ê°€: í‘œì¤€ ì†ì„± */
            -webkit-box-orient: vertical;
            line-height: 1.3;
        }
        
        /* âœ¨ ëª¨ë°”ì¼ì—ì„œ ë‰´ìŠ¤ ì œëª© 1ì¤„ë¡œ ì œí•œ */
        @media (max-width: 640px) {
            .news-title {
                -webkit-line-clamp: 1;
                line-clamp: 1;  /* âœ¨ ì¶”ê°€: í‘œì¤€ ì†ì„± */
                white-space: nowrap;
                display: block;
                -webkit-box-orient: initial;
            }
        }
        
        .news-title.pi-blog {
            color: #5b21b6;
            font-weight: 600;
        }
        
        /* âœ¨ ìƒˆë¡œ ì¶”ê°€: Pi ë¸”ë¡œê·¸ Official ë°°ì§€ */
        .official-badge {
            background-color: #7c3aed;
            color: white;
            font-size: 0.6rem;
            padding: 0.125rem 0.375rem;
            border-radius: 9999px;
            font-weight: 600;
            margin-left: 0.5rem;
            text-transform: uppercase;
        }
        
        /* âœ¨ ìƒˆë¡œ ì¶”ê°€: Pi ë¸”ë¡œê·¸ ì•Œë¦¼ ë©”ì‹œì§€ */
        .pi-blog-notice {
            background: linear-gradient(135deg, #faf5ff, #f3e8ff);
            border: 1px solid #c4b5fd;
            border-radius: 0.5rem;
            padding: 0.75rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            font-size: 0.875rem;
            color: #5b21b6;
        }
        
        .pi-blog-notice .icon {
            margin-right: 0.5rem;
            font-size: 1rem;
        }
        
        /* âœ¨ ìƒˆë¡œ ì¶”ê°€: ìƒˆ ê¸€ ì•Œë¦¼ ìŠ¤íƒ€ì¼ */
        .new-post-notification {
            background: linear-gradient(135deg, #ecfdf5, #d1fae5);
            border: 1px solid #a7f3d0;
            border-radius: 0.5rem;
            padding: 0.75rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 0.875rem;
            color: #065f46;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .new-post-notification:hover {
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
        }
        
        .new-post-notification.hidden {
            display: none;
        }
        
        /* ë¡œë”© ìŠ¤í”¼ë„ˆ */
        .spinner {
            border: 2px solid #f3f4f6;
            border-top: 2px solid #f97316;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* âœ¨ ìƒˆë¡œ ì¶”ê°€: ì‘ì€ ë¡œë”© ìŠ¤í”¼ë„ˆ */
        .spinner-small {
            border: 2px solid #f3f4f6;
            border-top: 2px solid #6b7280;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
            margin-right: 0.5rem;
        }
        
        /* ì„¹ì…˜ íŒ¨ë”© ì¡°ì • */
        .section-padding {
            padding-top: 5rem;
            padding-bottom: 5rem;
        }
        
        /* ëª¨ë°”ì¼ ë°˜ì‘í˜• ê°œì„  */
        @media (max-width: 768px) {
            .section-padding {
                padding-top: 3rem;
                padding-bottom: 3rem;
            }
        }
        
        /* Pi Browser ì •ë³´ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ ë³€ê²½ (ëœ ê°•ì¡°) */
        .pi-info-box {
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 0.75rem;
            margin-top: 1rem;
            font-size: 0.875rem;
        }
        
        /* âœ¨ ìƒˆë¡œ ì¶”ê°€: ì´ˆëŒ€ ì½”ë“œ ê°•ì¡° ìŠ¤íƒ€ì¼ */
        .invite-code {
            background-color: #fef3c7;
            color: #92400e;
            padding: 0.125rem 0.25rem;
            border-radius: 0.25rem;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            border: 1px solid #fbbf24;
        }
        
        /* í†µê³„ ê´€ë ¨ ìŠ¤íƒ€ì¼ */
        .stats-container {
            background-color: #fefbff;
            border: 1px solid #e879f9;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .stats-item {
            display: inline-block;
            margin: 0 0.5rem;
            font-size: 0.875rem;
            color: #7c3aed;
            font-weight: 500;
        }
        
        @media (max-width: 640px) {
            .stats-item {
                display: block;
                margin: 0.25rem 0;
                font-size: 0.75rem;
            }
        }
        
        /* âœ¨ ìˆ˜ì •: ê²Œì‹œê¸€ ëª¨ë°”ì¼ 2ì¤„ ë ˆì´ì•„ì›ƒ - í•µì‹¬ ìˆ˜ì •ì‚¬í•­ */
        .post-item {
            cursor: pointer;
            transition: all 0.2s;
            border-radius: 0.5rem;
            padding: 1rem;
            border: 1px solid #e5e7eb;
            margin-bottom: 0.5rem;
        }
        
        .post-item:hover {
            background-color: #f9fafb;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        /* âœ¨ ìƒˆë¡œ ì¶”ê°€: ìƒˆ ê²Œì‹œê¸€ í•˜ì´ë¼ì´íŠ¸ */
        .post-item.new-post {
            border-left: 4px solid #10b981;
            background-color: #f0fdf4;
        }
        
        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        
        /* âœ¨ ìƒˆë¡œìš´ ëª¨ë°”ì¼ 2ì¤„ ë ˆì´ì•„ì›ƒ ìŠ¤íƒ€ì¼ */
        @media (max-width: 640px) {
            .post-header {
                /* ëª¨ë°”ì¼ì—ì„œ ì„¸ë¡œ ë°°ì¹˜ë¡œ ë³€ê²½í•˜ì—¬ 2ì¤„ ë ˆì´ì•„ì›ƒ êµ¬í˜„ */
                flex-direction: column;
                align-items: stretch;
                gap: 0.5rem;
            }
            
            /* ì²« ë²ˆì§¸ ì¤„: ì œëª©ê³¼ ì•¡ì…˜ ë²„íŠ¼ë“¤ */
            .post-title-row {
                display: flex;
                justify-content: space-between;
                align-items: center;
                width: 100%;
            }
            
            /* ë‘ ë²ˆì§¸ ì¤„: ë‹‰ë„¤ì„ê³¼ ë‚ ì§œ */
            .post-meta-row {
                display: flex;
                justify-content: space-between;
                align-items: center;
                width: 100%;
                font-size: 0.75rem;
                color: #6b7280;
                padding-top: 0.25rem;
                border-top: 1px solid #f3f4f6;
            }
        }
        
        .post-title {
            font-weight: bold;
            color: #1f2937;
            flex: 1;
            cursor: pointer;
            /* ì œëª© ì¶•ì•½ ì²˜ë¦¬ */
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        @media (max-width: 640px) {
            .post-title {
                max-width: 200px; /* ëª¨ë°”ì¼: ì œëª© ê¸¸ì´ ì œí•œ */
            }
        }
        
        @media (min-width: 641px) {
            .post-title {
                max-width: 300px; /* ë°ìŠ¤í¬í†±: ì œëª© ê¸¸ì´ ì œí•œ */
            }
        }
        
        .post-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-shrink: 0;
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        /* ë°ìŠ¤í¬í†±ì—ì„œëŠ” ê¸°ì¡´ ë ˆì´ì•„ì›ƒ ìœ ì§€ */
        @media (min-width: 641px) {
            .post-meta {
                display: flex;
                align-items: center;
                gap: 1rem;
                flex-shrink: 0;
                font-size: 0.875rem;
                color: #6b7280;
            }
        }
        
        .post-nickname {
            /* ë‹‰ë„¤ì„ ì¶•ì•½ ì²˜ë¦¬ */
            max-width: 120px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .post-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            margin-top: 0;
        }
        
        .post-content.expanded {
            max-height: 500px;
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid #e5e7eb;
        }
        
        .post-actions {
            opacity: 0;
            transition: opacity 0.2s;
            display: flex;
            gap: 0.5rem;
            margin-left: 1rem;
        }
        
        /* âœ¨ ìˆ˜ì •: ëª¨ë°”ì¼ì—ì„œëŠ” ë‚´ìš© í¼ì³¤ì„ ë•Œë§Œ ì•¡ì…˜ ë²„íŠ¼ í‘œì‹œ */
        @media (max-width: 640px) {
            .post-actions {
                opacity: 0;
                margin-left: 0;
            }
            
            /* ë‚´ìš©ì´ í¼ì³ì§„ ìƒíƒœì¼ ë•Œë§Œ ë²„íŠ¼ í‘œì‹œ */
            .post-item.content-expanded .post-actions {
                opacity: 1;
            }
        }
        
        .post-item:hover .post-actions {
            opacity: 1;
        }
        
        /* âœ¨ ìƒˆë¡œìš´ ì² í•™ ì„¹ì…˜ ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ */
        .philosophy-icon {
            width: 4rem;
            height: 4rem;
            margin: 0 auto 1rem auto;
            background-color: #fff7ed;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            transition: all 0.3s ease;
        }
        
        .philosophy-icon:hover {
            transform: scale(1.1);
            background-color: #fed7aa;
        }
        
        /* ê° ì² í•™ í•­ëª©ë³„ ê³ ìœ  ìƒ‰ìƒ */
        .philosophy-pi .philosophy-icon {
            background-color: #fef3c7;
            color: #f59e0b;
        }
        
        .philosophy-pi .philosophy-icon:hover {
            background-color: #fcd34d;
        }
        
        .philosophy-ai .philosophy-icon {
            background-color: #dbeafe;
            color: #3b82f6;
        }
        
        .philosophy-ai .philosophy-icon:hover {
            background-color: #93c5fd;
        }
        
        .philosophy-nori .philosophy-icon {
            background-color: #dcfce7;
            color: #22c55e;
        }
        
        .philosophy-nori .philosophy-icon:hover {
            background-color: #86efac;
        }
    </style>
</head>
<body class="antialiased">

    <!-- í—¤ë” & ë„¤ë¹„ê²Œì´ì…˜ -->
    <header class="bg-white sticky top-0 z-50 border-b border-gray-100">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <a href="#home" class="text-2xl font-bold text-orange-500">Painori</a>
                
                <!-- ë°ìŠ¤í¬í†± ë„¤ë¹„ê²Œì´ì…˜ -->
                <nav class="hidden md:flex items-center space-x-8">
                    <a href="#news" class="text-gray-600 hover:text-orange-500 transition" data-i18n="nav_news">News</a>
                    <a href="#philosophy" class="text-gray-600 hover:text-orange-500 transition" data-i18n="nav_philosophy">Philosophy</a>
                    <a href="#game" class="text-gray-600 hover:text-orange-500 transition" data-i18n="nav_game">Game</a>
                    <a href="#lounge" class="text-gray-600 hover:text-orange-500 transition" data-i18n="nav_lounge">Lounge</a>
                    <div class="flex items-center space-x-1 border-l pl-6">
                        <button class="lang-btn" data-lang="en">EN</button>
                        <span class="text-gray-300">|</span>
                        <button class="lang-btn" data-lang="ko">KR</button>
                    </div>
                </nav>

                <!-- ëª¨ë°”ì¼ ë©”ë‰´ ë²„íŠ¼ -->
                <div class="flex items-center space-x-4 md:hidden">
                    <div class="flex items-center space-x-1">
                        <button class="lang-btn" data-lang="en">EN</button>
                        <span class="text-gray-300">|</span>
                        <button class="lang-btn" data-lang="ko">KR</button>
                    </div>
                    <button id="mobile-menu-button" class="text-orange-500">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- ëª¨ë°”ì¼ ë©”ë‰´ -->
            <div id="mobile-menu" class="hidden md:hidden border-t py-4">
                <a href="#news" class="block text-gray-600 hover:text-orange-500 transition py-2" data-i18n="nav_news_mobile">News</a>
                <a href="#philosophy" class="block text-gray-600 hover:text-orange-500 transition py-2" data-i18n="nav_philosophy_mobile">Philosophy</a>
                <a href="#game" class="block text-gray-600 hover:text-orange-500 transition py-2" data-i18n="nav_game_mobile">Game</a>
                <a href="#lounge" class="block text-gray-600 hover:text-orange-500 transition py-2" data-i18n="nav_lounge_mobile">Lounge</a>
            </div>
        </div>
    </header>

    <main>
        <!-- íˆì–´ë¡œ ì„¹ì…˜ -->
        <section id="home" class="bg-gradient-to-b from-orange-50 to-white">
            <div class="container mx-auto px-4 py-16 md:py-24 lg:py-32 text-center">
                <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-gray-800 leading-tight" data-i18n="hero_title">
                    Painori: Pi, AI, and Nori
                </h1>
                <p class="mt-4 text-sm sm:text-base md:text-lg lg:text-xl text-gray-600 max-w-3xl mx-auto" data-i18n="hero_subtitle">
                    We create enjoyable Nori (play) with AI technology on the Pi ecosystem.
                </p>
                <div class="mt-8 md:mt-10">
                    <a href="#game" class="btn-primary" data-i18n="hero_cta">Play Our First Nori, SPOT NORI</a>
                </div>
            </div>
        </section>

        <!-- ë‰´ìŠ¤ ì„¹ì…˜ -->
        <section id="news" class="section-padding bg-white">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-2xl md:text-3xl lg:text-4xl font-bold text-gray-800" data-i18n="news_title">Stay Connected</h2>
                    <p class="mt-4 text-base md:text-lg text-gray-600" data-i18n="news_subtitle">Don't miss the latest news from the Pi ecosystem.</p>
                </div>
                <div class="max-w-4xl mx-auto">
                    <!-- âœ¨ ìˆ˜ì •: íƒ­ ë„¤ë¹„ê²Œì´ì…˜ - íƒ­ ì´ë¦„ ë³€ê²½ -->
                    <div class="flex justify-center border-b mb-6">
                        <!-- ê¸°ì¡´ "Pi Network" â†’ "Pi ê³µì§€"ë¡œ ë³€ê²½ -->
                        <button data-tab="pi-news" class="tab-btn py-3 px-4 md:px-6 text-base md:text-lg font-semibold text-orange-500 border-b-2 border-orange-500" data-i18n="news_tab_pi">Pi ê³µì§€</button>
                        <!-- ê¸°ì¡´ "Crypto Market" â†’ "Crypto News"ë¡œ ë³€ê²½ -->
                        <button data-tab="crypto-news" class="tab-btn py-3 px-4 md:px-6 text-base md:text-lg font-semibold text-gray-500 hover:text-gray-700" data-i18n="news_tab_crypto">Crypto News</button>
                    </div>
                    <!-- Pi ë‰´ìŠ¤ -->
                    <div id="pi-news" class="tab-content">
                        <div id="pi-news-list" class="space-y-2">
                            <div class="text-center py-8">
                                <div class="spinner mx-auto mb-4"></div>
                                <p class="text-gray-500" data-i18n="news_loading">Loading latest news...</p>
                            </div>
                        </div>
                    </div>
                    <!-- í¬ë¦½í†  ë‰´ìŠ¤ -->
                    <div id="crypto-news" class="tab-content hidden">
                        <div id="crypto-news-list" class="space-y-2">
                            <div class="text-center py-8">
                                <div class="spinner mx-auto mb-4"></div>
                                <p class="text-gray-500" data-i18n="news_loading">Loading latest news...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- âœ¨ ìˆ˜ì •: ì² í•™ ì„¹ì…˜ - ê° í•­ëª©ì— ì•„ì´ì½˜ ì¶”ê°€ + ë‚´ìš© ì¶•ì•½ -->
        <section id="philosophy" class="section-padding bg-gray-50">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12 md:mb-16">
                    <h2 class="text-2xl md:text-3xl lg:text-4xl font-bold text-gray-800" data-i18n="philosophy_title">About Painori</h2>
                    <p class="mt-4 text-base md:text-lg text-gray-600" data-i18n="philosophy_subtitle">Our philosophy began with deep experience and insight.</p>
                </div>
                <div class="grid md:grid-cols-3 gap-6 md:gap-8">
                    <!-- Pi - Community (ë„¤íŠ¸ì›Œí¬ ì•„ì´ì½˜ ì¶”ê°€) -->
                    <div class="bg-white p-6 md:p-8 rounded-lg philosophy-pi">
                        <div class="text-center">
                            <!-- ğŸŒ ë„¤íŠ¸ì›Œí¬/ìƒíƒœê³„ë¥¼ ìƒì§•í•˜ëŠ” ì•„ì´ì½˜ -->
                            <div class="philosophy-icon">
                                ğŸŒ
                            </div>
                            <h3 class="text-xl md:text-2xl font-bold text-orange-500 mb-4" data-i18n="philosophy_pi_title">Pi - Community</h3>
                            <p class="text-sm md:text-base text-gray-600 leading-relaxed" data-i18n="philosophy_pi_desc">
                                We focused on Pi Network's strong community potential. All Painori's 'Nori' exists for the Pioneers.
                            </p>
                        </div>
                    </div>
                    <!-- AI - Technology (AI/ê¸°ì–´ ì•„ì´ì½˜ ì¶”ê°€) -->
                    <div class="bg-white p-6 md:p-8 rounded-lg philosophy-ai">
                        <div class="text-center">
                            <!-- ğŸ¤– AI/ì—”ì§„ì„ ìƒì§•í•˜ëŠ” ì•„ì´ì½˜ -->
                            <div class="philosophy-icon">
                                ğŸ¤–
                            </div>
                            <h3 class="text-xl md:text-2xl font-bold text-orange-500 mb-4" data-i18n="philosophy_ai_title">AI - Technology</h3>
                            <p class="text-sm md:text-base text-gray-600 leading-relaxed" data-i18n="philosophy_ai_desc">
                                AI technology transforms our game development ideas into reality with powerful efficiency.
                            </p>
                        </div>
                    </div>
                    <!-- Nori - Play (íƒ€ê²Ÿ/ê²Œì„ ì•„ì´ì½˜ ì¶”ê°€) -->
                    <div class="bg-white p-6 md:p-8 rounded-lg philosophy-nori">
                        <div class="text-center">
                            <!-- ğŸ¯ ëª©í‘œ/ë†€ì´ë¥¼ ìƒì§•í•˜ëŠ” ì•„ì´ì½˜ -->
                            <div class="philosophy-icon">
                                ğŸ¯
                            </div>
                            <h3 class="text-xl md:text-2xl font-bold text-orange-500 mb-4" data-i18n="philosophy_nori_title">Nori - Play</h3>
                            <p class="text-sm md:text-base text-gray-600 leading-relaxed" data-i18n="philosophy_nori_desc">
                                Technology's ultimate goal is pure enjoyment. We create real playgrounds for everyone.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ê²Œì„ ì‡¼ì¼€ì´ìŠ¤ ì„¹ì…˜ -->
        <section id="game" class="section-padding bg-white">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-2xl md:text-3xl lg:text-4xl font-bold text-gray-800" data-i18n="game_title">Our First 'Nori': SPOT NORI</h2>
                    <p class="mt-4 text-base md:text-lg text-gray-600" data-i18n="game_subtitle">Introducing SPOT NORI, the first game embodying Painori's philosophy.</p>
                </div>
                <div class="card p-6 md:p-8 lg:p-12 max-w-5xl mx-auto">
                    <div class="grid md:grid-cols-2 gap-8 md:gap-12 items-center">
                        <div class="flex justify-center">
                            <!-- Firebase Storage ì´ë¯¸ì§€ ì‚¬ìš© -->
                            <img src="https://firebasestorage.googleapis.com/v0/b/painori-web.firebasestorage.app/o/splash.png?alt=media&token=fc1c9478-7fda-43b2-977a-ff248030b184" 
                                 alt="SPOT NORI" 
                                 class="rounded-lg shadow-lg w-full max-w-[200px] sm:max-w-[250px] md:max-w-[300px]">
                        </div>
                        <div>
                            <h3 class="text-xl md:text-2xl font-bold mb-4" data-i18n="game_feature_title">Classic Spot-the-Difference, More Fun</h3>
                            <p class="text-sm md:text-base text-gray-600 mb-6" data-i18n="game_feature_desc">
                                It's a classic spot-the-difference game to enjoy while focusing purely on your own skills, with colorful images generated by AI. Challenge new themes and test the limits of your observation.
                            </p>
                            
                            <div class="space-y-4">
                                <!-- í…ŒìŠ¤íŠ¸ë„· ë²„íŠ¼ì— í´ë¦­ í†µê³„ ê¸°ëŠ¥ ìœ ì§€ -->
                                <a href="https://testspot.painori.com" 
                                   target="_blank" 
                                   rel="noopener noreferrer" 
                                   class="btn-primary w-full text-center block" 
                                   id="testnet-join-btn"
                                   data-i18n="game_testnet_btn">Join Testnet ğŸ§ª</a>
                                <p class="text-xs md:text-sm text-center text-gray-500" data-i18n="game_testnet_desc">
                                    Be the first to experience new features and help us complete the game!
                                </p>
                            </div>
                            <div class="mt-4 space-y-4">
                                <button class="btn-disabled w-full text-center block cursor-not-allowed" disabled data-i18n="game_mainnet_btn">
                                    Mainnet (Coming Soon) âœ¨
                                </button>
                                <p class="text-xs md:text-sm text-center text-gray-500" data-i18n="game_mainnet_desc">
                                    After thorough stability verification, we will launch the official version.
                                </p>
                            </div>
                            
                            <!-- Pi Browser ì •ë³´ë¥¼ ë©”ì¸ë„· ë¬¸êµ¬ ì•„ë˜ë¡œ ì´ë™í•˜ê³  ëœ ê°•ì¡° -->
                            <div class="pi-info-box">
                                <p class="text-gray-700 mb-3" data-i18n="game_pi_browser_info">
                                    ğŸ® For the best gaming experience, play on Pi Browser.<br>
                                    ğŸ’° When joining Pi Network, enter invite code <span class="invite-code">lukep81</span> to grow together!
                                </p>
                                <!-- âœ¨ ìˆ˜ì •: Pi Browser ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ - URLê³¼ ìƒ‰ìƒ ë³€ê²½ -->
                                <div class="text-center">
                                    <!-- ê¸°ì¡´ URL: https://node.minepi.com/ â†’ ìƒˆ URL: https://minepi.com/pi-browser -->
                                    <!-- ê¸°ì¡´ ì´ˆë¡ìƒ‰ â†’ ìƒˆë¡œìš´ Pi Network ë³´ë¼ìƒ‰ ê·¸ë¼ë°ì´ì…˜ (CSSì—ì„œ ì •ì˜) -->
                                    <a href="https://minepi.com/pi-browser" 
                                       target="_blank" 
                                       rel="noopener noreferrer" 
                                       class="btn-download" 
                                       data-i18n="game_download_pi_browser">ğŸ“± Download Pi Browser</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- âœ¨ ìƒˆë¡œ ì¶”ê°€: í†µê³„ ì„¹ì…˜ (Pioneer's Lounge ìœ„ë¡œ ì´ë™) -->
        <section class="py-8 bg-gray-50 border-t">
            <div class="container mx-auto px-4">
                <div class="max-w-4xl mx-auto">
                    <div class="stats-container">
                        <div class="mb-2">
                            <span class="stats-item">ğŸ“Š <span data-i18n="stats_today">Today</span>: <span id="today-visitors">0</span> <span data-i18n="stats_visitors">visitors</span> | <span id="today-testnet">0</span> <span data-i18n="stats_joined_testnet">joined testnet</span></span>
                        </div>
                        <div>
                            <span class="stats-item">ğŸ“ˆ <span data-i18n="stats_total">Total</span>: <span id="total-visitors">0</span> <span data-i18n="stats_visitors">visitors</span> | <span id="total-testnet">0</span> <span data-i18n="stats_joined_testnet">joined testnet</span></span>
                        </div>
                        <div class="mt-2 text-xs text-gray-500" data-i18n="stats_note">
                            (Unique visits per device/day)
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ë¼ìš´ì§€ ì„¹ì…˜ -->
        <section id="lounge" class="section-padding bg-gray-50">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-2xl md:text-3xl lg:text-4xl font-bold text-gray-800" data-i18n="lounge_title">Pioneer's Lounge</h2>
                    <p class="mt-4 text-base md:text-lg text-gray-600" data-i18n="lounge_subtitle">Feel free to talk about the Painori project and the Pi ecosystem.</p>
                </div>
                <div class="max-w-4xl mx-auto">
                    <div class="bg-white p-4 md:p-6 rounded-lg shadow-sm">
                        
                        <!-- âœ¨ ìƒˆë¡œ ì¶”ê°€: ìƒˆ ê¸€ ì•Œë¦¼ -->
                        <div id="new-post-notification" class="new-post-notification hidden">
                            <span data-i18n="new_post_available">ìƒˆë¡œìš´ ê¸€ì´ ìˆìŠµë‹ˆë‹¤. í´ë¦­í•˜ì—¬ ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”.</span>
                            <span>ğŸ“</span>
                        </div>
                        
                        <div class="flex justify-end mb-4">
                            <button id="new-post-btn" class="btn-primary" data-i18n="lounge_new_post_btn">New Post</button>
                        </div>
                        <!-- ê¸€ì“°ê¸° í¼ -->
                        <div id="post-form-container" class="hidden mb-6 p-4 md:p-6 border rounded-lg bg-gray-50">
                            <h3 class="text-lg md:text-xl font-bold mb-4" data-i18n="lounge_form_title">Create New Post</h3>
                            <div class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <input id="post-nickname" 
                                           type="text" 
                                           maxlength="20"
                                           data-i18n-placeholder="lounge_form_nickname" 
                                           placeholder="Nickname" 
                                           class="w-full p-2 md:p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-sm md:text-base">
                                    <input id="post-password" 
                                           type="password" 
                                           data-i18n-placeholder="lounge_form_password" 
                                           placeholder="Password (for edit/delete)" 
                                           class="w-full p-2 md:p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-sm md:text-base">
                                </div>
                                <input id="post-title" 
                                       type="text" 
                                       maxlength="50"
                                       data-i18n-placeholder="lounge_form_title_placeholder" 
                                       placeholder="Title" 
                                       class="w-full p-2 md:p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-sm md:text-base">
                                <textarea id="post-content" 
                                          maxlength="300"
                                          data-i18n-placeholder="lounge_form_content" 
                                          placeholder="Enter your content..." 
                                          rows="5" 
                                          class="w-full p-2 md:p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-sm md:text-base"></textarea>
                                <div class="flex justify-end space-x-3">
                                    <button id="cancel-post-btn" class="btn-secondary" data-i18n="lounge_form_cancel">Cancel</button>
                                    <button id="submit-post-btn" class="btn-primary" data-i18n="lounge_form_submit">Submit</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ìˆ˜ì • í¼ -->
                        <div id="edit-form-container" class="hidden mb-6 p-4 md:p-6 border rounded-lg bg-blue-50">
                            <h3 class="text-lg md:text-xl font-bold mb-4" data-i18n="lounge_edit_title">Edit Post</h3>
                            <div class="space-y-4">
                                <input id="edit-password" 
                                       type="password" 
                                       data-i18n-placeholder="lounge_form_password" 
                                       placeholder="Password" 
                                       class="w-full p-2 md:p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base">
                                <input id="edit-title" 
                                       type="text" 
                                       maxlength="50"
                                       data-i18n-placeholder="lounge_form_title_placeholder" 
                                       placeholder="Title" 
                                       class="w-full p-2 md:p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base">
                                <textarea id="edit-content-field" 
                                          maxlength="300"
                                          data-i18n-placeholder="lounge_form_content" 
                                          placeholder="Enter your content..." 
                                          rows="5" 
                                          class="w-full p-2 md:p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base"></textarea>
                                <div class="flex justify-end space-x-3">
                                    <button id="cancel-edit-btn" class="btn-secondary" data-i18n="lounge_form_cancel">Cancel</button>
                                    <button id="save-edit-btn" class="btn-primary" data-i18n="lounge_save_edit">Save Changes</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- âœ¨ ìˆ˜ì •: ê²Œì‹œê¸€ ëª©ë¡ - í˜ì´ì§€ë„¤ì´ì…˜ + ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì ìš© -->
                        <div id="post-list" class="space-y-2">
                            <div class="text-center py-8 text-gray-500" data-i18n="lounge_no_posts">
                                No posts yet. Be the first to write one!
                            </div>
                        </div>
                        
                        <!-- âœ¨ ìƒˆë¡œ ì¶”ê°€: ë”ë³´ê¸° ë²„íŠ¼ -->
                        <button id="load-more-btn" class="btn-load-more hidden" data-i18n="load_more_posts">
                            Load More Posts
                        </button>
                        
                        <!-- âœ¨ ìƒˆë¡œ ì¶”ê°€: ë¡œë”© í‘œì‹œ -->
                        <div id="posts-loading" class="hidden text-center py-4">
                            <div class="spinner-small inline-block"></div>
                            <span class="text-gray-500" data-i18n="loading_posts">Loading posts...</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- í‘¸í„° -->
    <footer class="bg-gray-900 text-gray-300 py-8 md:py-10">
        <div class="container mx-auto px-4 text-center">
            <p class="font-bold text-base md:text-lg text-white">Painori</p>
            <p class="mt-2 text-xs md:text-sm" data-i18n="footer_motto">Creating enjoyable experiences based on the philosophy of Pi, AI, and Nori.</p>
            <div class="mt-4 md:mt-6 space-x-4 text-xs md:text-sm">
                <a href="/privacy.html" class="hover:text-orange-400 transition" data-i18n="footer_privacy">Privacy Policy</a>
                <span>|</span>
                <a href="/terms.html" class="hover:text-orange-400 transition" data-i18n="footer_terms">Terms of Service</a>
            </div>
            <p class="mt-4 md:mt-6 text-xs">Contact: lukep81@painori.com</p>
            <p class="mt-4 text-xs opacity-75" data-i18n="footer_disclaimer">
                Â© 2025 Painori. All Rights Reserved. Painori is an independently operated third-party project.
            </p>
        </div>
    </footer>

    <script>
        // Firebase ì„¤ì •
        const firebaseConfig = {
            apiKey: "AIzaSyBa1u3tVq7NoFzD4gzndT_A_nDl2p_zfQk",
            authDomain: "painori-web.firebaseapp.com",
            projectId: "painori-web",
            storageBucket: "painori-web.firebasestorage.app",
            messagingSenderId: "423743376937",
            appId: "1:423743376937:web:4e77251616508269d7d638",
            measurementId: "G-4RHNE60YV5"
        };
        
        // Firebase ì´ˆê¸°í™”
        const app = firebase.initializeApp(firebaseConfig);
        const functions = firebase.functions();
        const db = firebase.firestore();

        // âœ¨ ìƒˆë¡œ ì¶”ê°€: ê²Œì‹œíŒ í˜ì´ì§€ë„¤ì´ì…˜ ê´€ë ¨ ë³€ìˆ˜
        let lastVisiblePost = null;
        let isLoadingPosts = false;
        let hasMorePosts = true;
        let postsListener = null;
        let loadedPostIds = new Set();

        // ì „ì—­ ë³€ìˆ˜ ì„ ì–¸ì„ í•¨ìˆ˜ í˜¸ì¶œ ì „ìœ¼ë¡œ ì´ë™ (JavaScript ì˜¤ë¥˜ ìˆ˜ì •)
        let currentEditingPostId = null;
        
        // DOM ìš”ì†Œë“¤ (DOMContentLoaded ì´ë²¤íŠ¸ ë‚´ì—ì„œ ì´ˆê¸°í™”)
        let postList, newPostBtn, postFormContainer, editFormContainer;
        let cancelPostBtn, submitPostBtn, cancelEditBtn, saveEditBtn;
        let loadMoreBtn, postsLoading, newPostNotification;

        // DOMì´ ë¡œë“œëœ í›„ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', () => {
            // DOM ìš”ì†Œ ì´ˆê¸°í™”ë¥¼ ë§¨ ì²˜ìŒì— ìˆ˜í–‰
            postList = document.getElementById('post-list');
            newPostBtn = document.getElementById('new-post-btn');
            postFormContainer = document.getElementById('post-form-container');
            editFormContainer = document.getElementById('edit-form-container');
            cancelPostBtn = document.getElementById('cancel-post-btn');
            submitPostBtn = document.getElementById('submit-post-btn');
            cancelEditBtn = document.getElementById('cancel-edit-btn');
            saveEditBtn = document.getElementById('save-edit-btn');
            // âœ¨ ìƒˆë¡œ ì¶”ê°€ëœ DOM ìš”ì†Œë“¤
            loadMoreBtn = document.getElementById('load-more-btn');
            postsLoading = document.getElementById('posts-loading');
            newPostNotification = document.getElementById('new-post-notification');

            // âœ¨ ìˆ˜ì •: ë‹¤êµ­ì–´ ë²ˆì—­ ë°ì´í„° - ê²Œì‹œíŒ ê°œì„  ê´€ë ¨ ë²ˆì—­ ì¶”ê°€
            const translations = {
                en: {
                    nav_news: "News",
                    nav_philosophy: "Philosophy",
                    nav_game: "Game",
                    nav_lounge: "Lounge",
                    nav_news_mobile: "News",
                    nav_philosophy_mobile: "Philosophy",
                    nav_game_mobile: "Game",
                    nav_lounge_mobile: "Lounge",
                    hero_title: "Painori: Pi, AI, and Nori",
                    hero_subtitle: "We create enjoyable Nori (play) with AI technology on the Pi ecosystem.",
                    hero_cta: "Play Our First Nori, SPOT NORI",
                    news_title: "Stay Connected",
                    news_subtitle: "Don't miss the latest news from the Pi ecosystem.",
                    // âœ¨ íƒ­ ì´ë¦„ ë³€ê²½: Pi Network â†’ Pi Updates, Crypto Market â†’ Crypto News
                    news_tab_pi: "Pi Updates",
                    news_tab_crypto: "Crypto News",
                    news_loading: "Loading latest news...",
                    news_error: "Failed to load news. Please try again later.",
                    news_pi_blog_notice: "Latest news from official Pi Network blog!",
                    philosophy_title: "About Painori",
                    philosophy_subtitle: "Our philosophy began with deep experience and insight.",
                    // âœ¨ ìˆ˜ì •: ì² í•™ ì„¹ì…˜ ì œëª© ë³€ê²½
                    philosophy_pi_title: "Pi - Community",
                    philosophy_pi_desc: "We focused on Pi Network's strong community potential. All Painori's 'Nori' exists for the Pioneers.",
                    philosophy_ai_title: "AI - Technology",
                    philosophy_ai_desc: "AI technology transforms our game development ideas into reality with powerful efficiency.",
                    philosophy_nori_title: "Nori - Play",
                    philosophy_nori_desc: "Technology's ultimate goal is pure enjoyment. We create real playgrounds for everyone.",
                    game_title: "Our First 'Nori': SPOT NORI",
                    game_subtitle: "Introducing SPOT NORI, the first game embodying Painori's philosophy.",
                    game_feature_title: "Classic Spot-the-Difference, More Fun",
                    game_feature_desc: "It's a classic spot-the-difference game to enjoy while focusing purely on your own skills, with colorful images generated by AI. Challenge new themes and test the limits of your observation.",
                    game_pi_browser_info: "ğŸ® For the best gaming experience, play on Pi Browser.\nğŸ’° When joining Pi Network, enter invite code lukep81 to grow together!",
                    game_testnet_btn: "Join Testnet ğŸ§ª",
                    game_testnet_desc: "Be the first to experience new features and help us complete the game!",
                    game_mainnet_btn: "Mainnet (Coming Soon) âœ¨",
                    game_mainnet_desc: "After thorough stability verification, we will launch the official version.",
                    game_download_pi_browser: "ğŸ“± Download Pi Browser",
                    lounge_title: "Pioneer's Lounge",
                    lounge_subtitle: "Feel free to talk about the Painori project and the Pi ecosystem.",
                    lounge_new_post_btn: "New Post",
                    lounge_form_title: "Create New Post",
                    lounge_edit_title: "Edit Post",
                    lounge_form_nickname: "Nickname",
                    lounge_form_password: "Password (for edit/delete)",
                    lounge_form_title_placeholder: "Title",
                    lounge_form_content: "Enter your content...",
                    lounge_form_cancel: "Cancel",
                    lounge_form_submit: "Submit",
                    lounge_save_edit: "Save Changes",
                    lounge_edit_btn: "Edit",
                    lounge_delete_btn: "Delete",
                    lounge_no_posts: "No posts yet. Be the first to write one!",
                    // âœ¨ ìƒˆë¡œ ì¶”ê°€: ê²Œì‹œíŒ ê°œì„  ê´€ë ¨ ë²ˆì—­
                    load_more_posts: "Load More Posts",
                    loading_posts: "Loading posts...",
                    new_post_available: "New post available. Click to refresh.",
                    all_posts_loaded: "All posts loaded",
                    stats_today: "Today",
                    stats_total: "Total",
                    stats_visitors: "visitors",
                    stats_joined_testnet: "joined testnet",
                    // âœ¨ ìƒˆë¡œ ì¶”ê°€: í†µê³„ ê¸°ì¤€ ì„¤ëª…
                    stats_note: "(Unique visits per device/day)",
                    footer_motto: "Creating enjoyable experiences based on the philosophy of Pi, AI, and Nori.",
                    footer_privacy: "Privacy Policy",
                    footer_terms: "Terms of Service",
                    footer_disclaimer: "Â© 2025 Painori. All Rights Reserved. Painori is an independently operated third-party project."
                },
                ko: {
                    nav_news: "ìµœì‹  ì†Œì‹",
                    nav_philosophy: "ì² í•™",
                    nav_game: "ê²Œì„",
                    nav_lounge: "ë¼ìš´ì§€",
                    nav_news_mobile: "ìµœì‹  ì†Œì‹",
                    nav_philosophy_mobile: "ì² í•™",
                    nav_game_mobile: "ê²Œì„",
                    nav_lounge_mobile: "ë¼ìš´ì§€",
                    hero_title: "Painori: Pi, AI, ê·¸ë¦¬ê³  ë†€ì´",
                    hero_subtitle: "ìš°ë¦¬ëŠ” íŒŒì´(Pi) ìƒíƒœê³„ ìœ„ì—ì„œ, ì¸ê³µì§€ëŠ¥(AI) ê¸°ìˆ ë¡œ, ì¦ê±°ìš´ ë†€ì´(Nori)ë¥¼ ë§Œë“­ë‹ˆë‹¤.",
                    hero_cta: "ì²« ë²ˆì§¸ ë†€ì´, SPOT NORI ì‹œì‘í•˜ê¸°",
                    news_title: "Stay Connected",
                    news_subtitle: "íŒŒì´ ìƒíƒœê³„ì˜ ì£¼ìš” ì†Œì‹ì„ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”.",
                    // âœ¨ í•œêµ­ì–´ íƒ­ ì´ë¦„: Pi Network â†’ Pi ê³µì§€, Crypto Market â†’ Crypto News
                    news_tab_pi: "Pi ê³µì§€",
                    news_tab_crypto: "Crypto News",
                    news_loading: "ìµœì‹  ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...",
                    news_error: "ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.",
                    news_pi_blog_notice: "Pi Network ê³µì‹ ë¸”ë¡œê·¸ì—ì„œ ìµœì‹  ì†Œì‹ì„ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤!",
                    philosophy_title: "About Painori",
                    philosophy_subtitle: "ìš°ë¦¬ì˜ ì² í•™ì€ ê¹Šì€ ê²½í—˜ê³¼ í†µì°°ì—ì„œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.",
                    // âœ¨ ìˆ˜ì •: ì² í•™ ì„¹ì…˜ ì œëª© ë³€ê²½ + ë‚´ìš© ì¶•ì•½
                    philosophy_pi_title: "Pi - Community",
                    philosophy_pi_desc: "ê°•ë ¥í•œ ì»¤ë®¤ë‹ˆí‹°ë¥¼ ê°€ì§„ Pi Networkì— ì£¼ëª©í–ˆìŠµë‹ˆë‹¤. Painoriì˜ ëª¨ë“  ë†€ì´ëŠ” íŒŒì´ì˜¤ë‹ˆì–´ë“¤ì„ ìœ„í•´ ì¡´ì¬í•©ë‹ˆë‹¤.",
                    philosophy_ai_title: "AI - Technology", 
                    philosophy_ai_desc: "AI ê¸°ìˆ ë¡œ ì˜¤ëœ ê²Œì„ ê°œë°œ ê²½í—˜ì˜ ì•„ì´ë””ì–´ë“¤ì„ íš¨ìœ¨ì ìœ¼ë¡œ í˜„ì‹¤í™”í•©ë‹ˆë‹¤.",
                    philosophy_nori_title: "Nori - Play",
                    philosophy_nori_desc: "ê¸°ìˆ ì˜ ìµœì¢… ëª©ì ì€ ìˆœìˆ˜í•œ ì¦ê±°ì›€ì…ë‹ˆë‹¤. ëª¨ë‘ë¥¼ ìœ„í•œ ì§„ì§œ ë†€ì´í„°ë¥¼ ë§Œë“­ë‹ˆë‹¤.",
                    game_title: "Our First 'Nori': SPOT NORI",
                    game_subtitle: "Painoriì˜ ì² í•™ì´ ë‹´ê¸´ ì²« ë²ˆì§¸ ê²Œì„, SPOT NORIë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.",
                    game_feature_title: "í´ë˜ì‹ í‹€ë¦°ê·¸ë¦¼ì°¾ê¸°, ê·¸ ì´ìƒì˜ ì¬ë¯¸",
                    game_feature_desc: "AIë¡œ ìƒì„±ëœ ë‹¤ì±„ë¡œìš´ ì´ë¯¸ì§€ë¥¼ í†µí•´, ì˜¨ì „íˆ ìì‹ ì—ê²Œ ì§‘ì¤‘í•˜ë©° ì¦ê¸°ëŠ” í´ë˜ì‹ í‹€ë¦°ê·¸ë¦¼ì°¾ê¸° ê²Œì„ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ í…Œë§ˆì— ë„ì „í•˜ë©° ê´€ì°°ë ¥ì˜ í•œê³„ë¥¼ ì‹œí—˜í•´ ë³´ì„¸ìš”.",
                    game_pi_browser_info: "ğŸ® ìµœê³ ì˜ ê²Œì„ ê²½í—˜ì„ ìœ„í•´ Pi Browserì—ì„œ í”Œë ˆì´í•˜ì„¸ìš”.\nğŸ’° Pi Network ê°€ì… ì‹œ ì´ˆëŒ€ ì½”ë“œ lukep81ì„ ì…ë ¥í•˜ë©´ í•¨ê»˜ ì„±ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!",
                    game_testnet_btn: "í…ŒìŠ¤íŠ¸ë„· ì°¸ì—¬í•˜ê¸° ğŸ§ª",
                    game_testnet_desc: "ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ê°€ì¥ ë¨¼ì € ê²½í—˜í•˜ê³ , ê²Œì„ì„ í•¨ê»˜ ì™„ì„±í•´ì£¼ì„¸ìš”!",
                    game_mainnet_btn: "ë©”ì¸ë„· (ì¤€ë¹„ ì¤‘) âœ¨",
                    game_mainnet_desc: "ì•ˆì •ì„± ê²€ì¦ì„ ë§ˆì¹œ í›„, ê³µì‹ ë²„ì „ìœ¼ë¡œ ì°¾ì•„ëµ™ê² ìŠµë‹ˆë‹¤.",
                    game_download_pi_browser: "ğŸ“± Pi Browser ë‹¤ìš´ë¡œë“œ",
                    lounge_title: "Pioneer's Lounge",
                    lounge_subtitle: "Painori í”„ë¡œì íŠ¸ì™€ íŒŒì´ ìƒíƒœê³„ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì´ì•¼ê¸°í•´ ë³´ì„¸ìš”.",
                    lounge_new_post_btn: "ìƒˆ ê¸€ì“°ê¸°",
                    lounge_form_title: "ìƒˆ ê¸€ ì‘ì„±",
                    lounge_edit_title: "ê¸€ ìˆ˜ì •",
                    lounge_form_nickname: "ë‹‰ë„¤ì„",
                    lounge_form_password: "ë¹„ë°€ë²ˆí˜¸ (ìˆ˜ì •/ì‚­ì œìš©)",
                    lounge_form_title_placeholder: "ì œëª©",
                    lounge_form_content: "ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...",
                    lounge_form_cancel: "ì·¨ì†Œ",
                    lounge_form_submit: "ë“±ë¡",
                    lounge_save_edit: "ë³€ê²½ì‚¬í•­ ì €ì¥",
                    lounge_edit_btn: "ìˆ˜ì •",
                    lounge_delete_btn: "ì‚­ì œ",
                    lounge_no_posts: "ì•„ì§ ì‘ì„±ëœ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”!",
                    // âœ¨ ìƒˆë¡œ ì¶”ê°€: ê²Œì‹œíŒ ê°œì„  ê´€ë ¨ ë²ˆì—­
                    load_more_posts: "ë” ë§ì€ ê¸€ ë³´ê¸°",
                    loading_posts: "ê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...",
                    new_post_available: "ìƒˆë¡œìš´ ê¸€ì´ ìˆìŠµë‹ˆë‹¤. í´ë¦­í•˜ì—¬ ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”.",
                    all_posts_loaded: "ëª¨ë“  ê¸€ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤",
                    stats_today: "ì˜¤ëŠ˜",
                    stats_total: "ì „ì²´",
                    stats_visitors: "ëª… ë°©ë¬¸",
                    stats_joined_testnet: "ëª… í…ŒìŠ¤íŠ¸ë„· ì°¸ì—¬",
                    // âœ¨ ìƒˆë¡œ ì¶”ê°€: í†µê³„ ê¸°ì¤€ ì„¤ëª…
                    stats_note: "(ê¸°ê¸°ë³„ 1ì¼ 1íšŒ ì¤‘ë³µ ì œê±°)",
                    footer_motto: "Pi, AI, Noriì˜ ì² í•™ì„ ë°”íƒ•ìœ¼ë¡œ ì¦ê±°ìš´ ê²½í—˜ì„ ë§Œë“­ë‹ˆë‹¤.",
                    footer_privacy: "ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨",
                    footer_terms: "ì´ìš©ì•½ê´€",
                    footer_disclaimer: "Â© 2025 Painori. All Rights Reserved. PainoriëŠ” ë…ë¦½ì ìœ¼ë¡œ ìš´ì˜ë˜ëŠ” ì œ3ì í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤."
                }
            };

            // í†µê³„ ê´€ë ¨ ì»¬ë ‰ì…˜
            const statsCollection = db.collection("stats");
            const dailyStatsCollection = db.collection("dailyStats");

            // ë°©ë¬¸ì í†µê³„ í•¨ìˆ˜
            async function updateVisitorStats() {
                const today = new Date().toISOString().split('T')[0];
                const userFingerprint = getUserFingerprint();
                
                try {
                    // ì˜¤ëŠ˜ ì´ë¯¸ ë°©ë¬¸í–ˆëŠ”ì§€ í™•ì¸
                    const visitorDoc = await dailyStatsCollection.doc(`${today}_${userFingerprint}`).get();
                    
                    if (!visitorDoc.exists) {
                        // ìƒˆ ë°©ë¬¸ìì¸ ê²½ìš° ì¹´ìš´íŠ¸ ì¦ê°€
                        await dailyStatsCollection.doc(`${today}_${userFingerprint}`).set({
                            date: today,
                            timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                            userAgent: navigator.userAgent.substring(0, 100)
                        });
                        
                        // ì˜¤ëŠ˜ ë°©ë¬¸ì ìˆ˜ ì¦ê°€
                        await dailyStatsCollection.doc(today).set({
                            visitors: firebase.firestore.FieldValue.increment(1)
                        }, { merge: true });
                        
                        // ì „ì²´ ë°©ë¬¸ì ìˆ˜ ì¦ê°€
                        await statsCollection.doc('total').set({
                            visitors: firebase.firestore.FieldValue.increment(1)
                        }, { merge: true });
                    }
                } catch (error) {
                    console.error('ë°©ë¬¸ì í†µê³„ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
                }
            }

            // í…ŒìŠ¤íŠ¸ë„· í´ë¦­ í†µê³„ í•¨ìˆ˜
            async function updateTestnetStats() {
                const today = new Date().toISOString().split('T')[0];
                const userFingerprint = getUserFingerprint();
                const lastClickKey = `testnet_click_${userFingerprint}`;
                const lastClickTime = localStorage.getItem(lastClickKey);
                const now = Date.now();
                
                // 1ì‹œê°„ ì¿¨ë‹¤ìš´ ì²´í¬ (3600000ms = 1ì‹œê°„)
                if (lastClickTime && (now - parseInt(lastClickTime)) < 3600000) {
                    console.log('í…ŒìŠ¤íŠ¸ë„· í´ë¦­ ì¿¨ë‹¤ìš´ ì¤‘...');
                    return;
                }
                
                try {
                    // ì¿¨ë‹¤ìš´ ì‹œê°„ ê¸°ë¡
                    localStorage.setItem(lastClickKey, now.toString());
                    
                    // ì˜¤ëŠ˜ í…ŒìŠ¤íŠ¸ë„· í´ë¦­ ìˆ˜ ì¦ê°€
                    await dailyStatsCollection.doc(today).set({
                        testnetClicks: firebase.firestore.FieldValue.increment(1)
                    }, { merge: true });
                    
                    // ì „ì²´ í…ŒìŠ¤íŠ¸ë„· í´ë¦­ ìˆ˜ ì¦ê°€
                    await statsCollection.doc('total').set({
                        testnetClicks: firebase.firestore.FieldValue.increment(1)
                    }, { merge: true });
                    
                    // í†µê³„ í‘œì‹œ ì—…ë°ì´íŠ¸
                    loadStats();
                } catch (error) {
                    console.error('í…ŒìŠ¤íŠ¸ë„· í†µê³„ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
                }
            }

            // ì‚¬ìš©ì ì§€ë¬¸ ìƒì„± í•¨ìˆ˜
            function getUserFingerprint() {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                ctx.textBaseline = 'top';
                ctx.font = '14px Arial';
                ctx.fillText('Painori fingerprint', 2, 2);
                
                return btoa(
                    navigator.userAgent + 
                    screen.width + screen.height + 
                    canvas.toDataURL()
                ).substring(0, 16);
            }

            // í†µê³„ ë¡œë“œ í•¨ìˆ˜
            async function loadStats() {
                const today = new Date().toISOString().split('T')[0];
                
                try {
                    // ì˜¤ëŠ˜ í†µê³„ ë¡œë“œ
                    const todayDoc = await dailyStatsCollection.doc(today).get();
                    const todayStats = todayDoc.exists ? todayDoc.data() : {};
                    
                    // ì „ì²´ í†µê³„ ë¡œë“œ
                    const totalDoc = await statsCollection.doc('total').get();
                    const totalStats = totalDoc.exists ? totalDoc.data() : {};
                    
                    // UI ì—…ë°ì´íŠ¸
                    document.getElementById('today-visitors').textContent = todayStats.visitors || 0;
                    document.getElementById('today-testnet').textContent = todayStats.testnetClicks || 0;
                    document.getElementById('total-visitors').textContent = totalStats.visitors || 0;
                    document.getElementById('total-testnet').textContent = totalStats.testnetClicks || 0;
                } catch (error) {
                    console.error('í†µê³„ ë¡œë“œ ì˜¤ë¥˜:', error);
                }
            }

            // í…ŒìŠ¤íŠ¸ë„· ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
            document.getElementById('testnet-join-btn').addEventListener('click', function(e) {
                // í´ë¦­ í†µê³„ ì—…ë°ì´íŠ¸
                updateTestnetStats();
            });

            // ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜
            function changeLanguage(lang) {
                document.documentElement.lang = lang;
                localStorage.setItem('painori_lang', lang);

                // data-i18n ì†ì„±ì„ ê°€ì§„ ëª¨ë“  ìš”ì†Œì˜ í…ìŠ¤íŠ¸ ë³€ê²½
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.dataset.i18n;
                    if (translations[lang] && translations[lang][key]) {
                        // Pi Browser ì •ë³´ëŠ” ì¤„ë°”ê¿ˆ ì²˜ë¦¬
                        if (key === 'game_pi_browser_info') {
                            el.innerHTML = translations[lang][key].replace(/\n/g, '<br>').replace(/lukep81/g, '<span class="invite-code">lukep81</span>');
                        } else {
                            el.textContent = translations[lang][key];
                        }
                    }
                });
                
                // placeholder ë²ˆì—­
                document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                    const key = el.dataset.i18nPlaceholder;
                    if (translations[lang] && translations[lang][key]) {
                        el.placeholder = translations[lang][key];
                    }
                });

                // ì–¸ì–´ ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ì—…ë°ì´íŠ¸
                document.querySelectorAll('.lang-btn').forEach(btn => {
                    if (btn.dataset.lang === lang) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });

                // ê²Œì‹œê¸€ ëª©ë¡ ë‹¤ì‹œ ë Œë”ë§
                renderPosts(lang);
            }

            // ì–¸ì–´ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    changeLanguage(e.target.dataset.lang);
                });
            });

            // ì´ˆê¸° ì–¸ì–´ ì„¤ì •
            const savedLang = localStorage.getItem('painori_lang');
            const browserLang = navigator.language.split('-')[0];
            const initialLang = savedLang || (translations[browserLang] ? browserLang : 'en');
            
            // ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            // ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                    // ëª¨ë°”ì¼ ë©”ë‰´ ë‹«ê¸°
                    if (!mobileMenu.classList.contains('hidden')) {
                        mobileMenu.classList.add('hidden');
                    }
                });
            });

            // âœ¨ ê°œì„ ëœ ë‰´ìŠ¤ ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜ - Pi ë¸”ë¡œê·¸ RSS ìš°ì„  ì²˜ë¦¬
            async function fetchNews() {
                const lang = document.documentElement.lang;
                const currentTranslations = translations[lang] || translations.en;

                const piNewsList = document.getElementById('pi-news-list');
                const cryptoNewsList = document.getElementById('crypto-news-list');

                // ë¡œë”© í‘œì‹œ
                const loadingHTML = `
                    <div class="text-center py-8">
                        <div class="spinner mx-auto mb-4"></div>
                        <p class="text-gray-500">${currentTranslations.news_loading}</p>
                    </div>
                `;
                piNewsList.innerHTML = loadingHTML;
                cryptoNewsList.innerHTML = loadingHTML;

                try {
                    // âœ¨ Pi Network ë‰´ìŠ¤ ê°€ì ¸ì˜¤ê¸° - RSS ìš°ì„  ì²˜ë¦¬
                    console.log('ğŸ” Pi Network ë‰´ìŠ¤ ìš”ì²­ ì‹œì‘ (RSS ìš°ì„ )');
                    const getPiNews = functions.httpsCallable('getPiNews');
                    const piResult = await getPiNews();
                    
                    console.log('ğŸ“¡ Pi News ì‘ë‹µ:', piResult);
                    
                    // ê°•í™”ëœ ë°ì´í„° ê²€ì¦
                    if (piResult && 
                        piResult.data && 
                        typeof piResult.data === 'object' && 
                        piResult.data.data && 
                        Array.isArray(piResult.data.data)) {
                        
                        console.log('âœ… Pi News ë°ì´í„° ìœ íš¨ì„± ê²€ì¦ í†µê³¼');
                        
                        // âœ¨ Pi ë¸”ë¡œê·¸ RSS ë‰´ìŠ¤ì¸ì§€ í™•ì¸í•˜ê³  íŠ¹ë³„ ì²˜ë¦¬
                        const isFromPiBlog = piResult.data.source === 'Pi Blog RSS';
                        if (isFromPiBlog) {
                            console.log('ğŸ¥§ Pi ë¸”ë¡œê·¸ RSS ë‰´ìŠ¤ ì‚¬ìš©!');
                        }
                        
                        renderNews(piNewsList, piResult.data.data, lang, isFromPiBlog);
                    } else {
                        console.warn('âš ï¸ Pi News ë°ì´í„° í˜•ì‹ ì˜¤ë¥˜:', piResult);
                        throw new Error('Invalid Pi News response format');
                    }
                } catch (error) {
                    console.error('âŒ Pi News ì—ëŸ¬:', error);
                    piNewsList.innerHTML = `<div class="text-center text-gray-500 p-4">${currentTranslations.news_error}</div>`;
                }

                try {
                    // Crypto Market ë‰´ìŠ¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë°©ì‹ ìœ ì§€)
                    console.log('ğŸ” Crypto Market ë‰´ìŠ¤ ìš”ì²­ ì‹œì‘');
                    const getCryptoNews = functions.httpsCallable('getCryptoNews');
                    const cryptoResult = await getCryptoNews();
                    
                    console.log('ğŸ“¡ Crypto News ì‘ë‹µ:', cryptoResult);
                    
                    // ê°•í™”ëœ ë°ì´í„° ê²€ì¦
                    if (cryptoResult && 
                        cryptoResult.data && 
                        typeof cryptoResult.data === 'object' && 
                        cryptoResult.data.data && 
                        Array.isArray(cryptoResult.data.data)) {
                        
                        console.log('âœ… Crypto News ë°ì´í„° ìœ íš¨ì„± ê²€ì¦ í†µê³¼');
                        renderNews(cryptoNewsList, cryptoResult.data.data, lang, false);
                    } else {
                        console.warn('âš ï¸ Crypto News ë°ì´í„° í˜•ì‹ ì˜¤ë¥˜:', cryptoResult);
                        throw new Error('Invalid Crypto News response format');
                    }
                } catch (error) {
                    console.error('âŒ Crypto News ì—ëŸ¬:', error);
                    cryptoNewsList.innerHTML = `<div class="text-center text-gray-500 p-4">${currentTranslations.news_error}</div>`;
                }
            }

            // âœ¨ ê°œì„ ëœ ë‰´ìŠ¤ ë Œë”ë§ í•¨ìˆ˜ - Pi ë¸”ë¡œê·¸ ì „ìš© ìŠ¤íƒ€ì¼ ì ìš© + ì´ëª¨ì§€ ì œê±° + 3ê°œ ì œí•œ
            function renderNews(container, newsData, lang, isFromPiBlog = false) {
                const currentTranslations = translations[lang] || translations.en;
                container.innerHTML = '';
                
                // ì¶”ê°€ ë°ì´í„° ê²€ì¦
                if (!newsData || !Array.isArray(newsData) || newsData.length === 0) {
                    container.innerHTML = `<div class="text-center text-gray-500 p-4">${currentTranslations.news_error}</div>`;
                    return;
                }
                
                // âœ¨ Pi ë¸”ë¡œê·¸ ë‰´ìŠ¤ê°€ ìˆëŠ” ê²½ìš° ìƒë‹¨ì— ì•ˆë‚´ ë©”ì‹œì§€ í‘œì‹œ (ì´ëª¨ì§€ ì œê±°)
                if (isFromPiBlog) {
                    const noticeDiv = document.createElement('div');
                    noticeDiv.className = 'pi-blog-notice';
                    noticeDiv.innerHTML = `
                        <span>${currentTranslations.news_pi_blog_notice}</span>
                    `;
                    container.appendChild(noticeDiv);
                }
                
                // âœ¨ ìˆ˜ì •: ë‰´ìŠ¤ ê°œìˆ˜ë¥¼ 5ê°œì—ì„œ 3ê°œë¡œ ì œí•œ
                newsData.slice(0, 3).forEach((news, index) => {
                    // ê°œë³„ ë‰´ìŠ¤ ì•„ì´í…œ ìœ íš¨ì„± ê²€ì‚¬
                    if (!news || !news.title || !news.source) {
                        return; // ìœ íš¨í•˜ì§€ ì•Šì€ ë‰´ìŠ¤ ê±´ë„ˆë›°ê¸°
                    }
                    
                    const newsItem = document.createElement('a');
                    newsItem.href = news.url || '#';
                    newsItem.target = '_blank';
                    newsItem.rel = 'noopener noreferrer';
                    
                    // âœ¨ Pi ë¸”ë¡œê·¸ ë‰´ìŠ¤ì¸ì§€ í™•ì¸
                    const isPiBlogNews = news.source.name === 'Pi Network Blog' || news.isFromRSS;
                    
                    // í´ë˜ìŠ¤ ì ìš©
                    newsItem.className = isPiBlogNews 
                        ? 'news-item pi-blog block' 
                        : 'news-item block';
                    
                    // âœ¨ ìˆ˜ì •: ì´ëª¨ì§€ ì œê±°, Blog â†’ Pi Blog ë³€ê²½
                    newsItem.innerHTML = `
    <span class="news-source ${isPiBlogNews ? 'pi-blog' : ''}">${
        isPiBlogNews ? 'Pi Blog <span class="official-badge">Official</span>' : (news.source.name || 'Unknown')
    }</span>
    <span class="news-title ${isPiBlogNews ? 'pi-blog' : ''}">${news.title}</span>
`;
                    container.appendChild(newsItem);
                });
            }

            // íƒ­ ì „í™˜ ê¸°ëŠ¥
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.dataset.tab;

                    // ëª¨ë“  íƒ­ ë²„íŠ¼ ë¹„í™œì„±í™”
                    tabButtons.forEach(btn => {
                        btn.classList.remove('text-orange-500', 'border-orange-500', 'border-b-2');
                        btn.classList.add('text-gray-500');
                    });

                    // í´ë¦­í•œ íƒ­ ë²„íŠ¼ í™œì„±í™”
                    button.classList.add('text-orange-500', 'border-orange-500', 'border-b-2');
                    button.classList.remove('text-gray-500');

                    // ëª¨ë“  íƒ­ ì½˜í…ì¸  ìˆ¨ê¸°ê¸°
                    tabContents.forEach(content => {
                        content.classList.add('hidden');
                    });

                    // ì„ íƒí•œ íƒ­ ì½˜í…ì¸  í‘œì‹œ
                    document.getElementById(tabId).classList.remove('hidden');
                });
            });

            const postsCollection = db.collection("posts");

            // âœ¨ ìƒˆë¡œ ì¶”ê°€: ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì„¤ì • í•¨ìˆ˜
            function setupPostsListener(lang) {
                // ê¸°ì¡´ ë¦¬ìŠ¤ë„ˆ í•´ì œ
                if (postsListener) {
                    postsListener();
                }

                console.log('ğŸ”„ ê²Œì‹œê¸€ ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì„¤ì •');
                
                // ìµœì‹  3ê°œ ê²Œì‹œê¸€ì— ëŒ€í•œ ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ
                postsListener = postsCollection
                    .orderBy("createdAt", "desc")
                    .limit(3)
                    .onSnapshot((snapshot) => {
                        const currentTranslations = translations[lang] || translations.en;
                        
                        snapshot.docChanges().forEach((change) => {
                            if (change.type === "added") {
                                const postId = change.doc.id;
                                
                                // ì´ë¯¸ ë¡œë“œëœ ê²Œì‹œê¸€ì´ ì•„ë‹Œ ê²½ìš°ì—ë§Œ ì•Œë¦¼ í‘œì‹œ
                                if (!loadedPostIds.has(postId)) {
                                    showNewPostNotification(currentTranslations);
                                }
                            }
                        });
                    }, (error) => {
                        console.error('âŒ ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì—ëŸ¬:', error);
                    });
            }

            // âœ¨ ìƒˆë¡œ ì¶”ê°€: ìƒˆ ê¸€ ì•Œë¦¼ í‘œì‹œ í•¨ìˆ˜
            function showNewPostNotification(translations) {
                if (newPostNotification) {
                    newPostNotification.classList.remove('hidden');
                    newPostNotification.querySelector('[data-i18n="new_post_available"]').textContent = 
                        translations.new_post_available;
                }
            }

            // âœ¨ ìƒˆë¡œ ì¶”ê°€: ìƒˆ ê¸€ ì•Œë¦¼ í´ë¦­ ì´ë²¤íŠ¸
            if (newPostNotification) {
                newPostNotification.addEventListener('click', () => {
                    // í˜ì´ì§€ë„¤ì´ì…˜ ì´ˆê¸°í™”í•˜ê³  ë‹¤ì‹œ ë¡œë“œ
                    lastVisiblePost = null;
                    hasMorePosts = true;
                    loadedPostIds.clear();
                    renderPosts(document.documentElement.lang, true);
                    newPostNotification.classList.add('hidden');
                });
            }

            // âœ¨ ìˆ˜ì •: ê²Œì‹œê¸€ ë Œë”ë§ í•¨ìˆ˜ - í˜ì´ì§€ë„¤ì´ì…˜ + ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ + ë¡œë”© ìµœì í™”
            async function renderPosts(lang, isRefresh = false) {
                if (!postList) return;
                
                if (isLoadingPosts) return; // ì´ë¯¸ ë¡œë”© ì¤‘ì´ë©´ ì¤‘ë‹¨
                
                const currentTranslations = translations[lang] || translations.en;
                
                try {
                    isLoadingPosts = true;
                    
                    if (isRefresh) {
                        // ìƒˆë¡œê³ ì¹¨ì¸ ê²½ìš° ì´ˆê¸°í™”
                        postList.innerHTML = '';
                        lastVisiblePost = null;
                        hasMorePosts = true;
                        loadedPostIds.clear();
                        
                        if (loadMoreBtn) {
                            loadMoreBtn.classList.add('hidden');
                        }
                    }
                    
                    // ë¡œë”© í‘œì‹œ
                    if (postsLoading) {
                        postsLoading.classList.remove('hidden');
                    }
                    
                    console.log('ğŸ“„ ê²Œì‹œê¸€ ëª©ë¡ ë¡œë”© ì‹œì‘');
                    
                    // âœ¨ ë¡œë”© ìµœì í™”: ì²« 3ê°œ ë¨¼ì € ë¡œë”©
                    let query = postsCollection
                        .orderBy("createdAt", "desc")
                        .limit(isRefresh ? 3 : 5); // ìƒˆë¡œê³ ì¹¨ ì‹œ 3ê°œ, ë”ë³´ê¸° ì‹œ 5ê°œ
                    
                    if (lastVisiblePost) {
                        query = query.startAfter(lastVisiblePost);
                    }
                    
                    const snapshot = await query.get();
                    
                    // ë¡œë”© ìˆ¨ê¹€
                    if (postsLoading) {
                        postsLoading.classList.add('hidden');
                    }
                    
                    if (snapshot.empty && !lastVisiblePost) {
                        console.log('ğŸ“„ ê²Œì‹œê¸€ ì—†ìŒ');
                        postList.innerHTML = `<div class="text-center py-8 text-gray-500">${currentTranslations.lounge_no_posts}</div>`;
                        return;
                    }
                    
                    if (snapshot.empty && lastVisiblePost) {
                        // ë” ì´ìƒ ë¶ˆëŸ¬ì˜¬ ê²Œì‹œê¸€ ì—†ìŒ
                        hasMorePosts = false;
                        if (loadMoreBtn) {
                            loadMoreBtn.textContent = currentTranslations.all_posts_loaded || 'All posts loaded';
                            loadMoreBtn.disabled = true;
                        }
                        return;
                    }
                    
                    console.log(`ğŸ“„ ${snapshot.size}ê°œ ê²Œì‹œê¸€ ë°œê²¬`);
                    
                    // ë§ˆì§€ë§‰ ë¬¸ì„œ ì—…ë°ì´íŠ¸
                    lastVisiblePost = snapshot.docs[snapshot.docs.length - 1];
                    
                    snapshot.forEach((doc, index) => {
                        const post = doc.data();
                        const postId = doc.id;
                        
                        // ì¤‘ë³µ ë°©ì§€
                        if (loadedPostIds.has(postId)) {
                            return;
                        }
                        loadedPostIds.add(postId);
                        
                        // ì‹œê°„ ì²˜ë¦¬
                        let displayTime = '';
                        if (post.createdAt && post.createdAt.toDate) {
                            const date = post.createdAt.toDate();
                            const timeFormat = lang === 'ko' ? 'ko-KR' : 'en-US';
                            
                            displayTime = date.toLocaleString(timeFormat, {
                                month: '2-digit',
                                day: '2-digit',
                                hour: '2-digit',
                                minute: '2-digit',
                                hour12: lang === 'en'
                            });
                        } else if (post.date) {
                            displayTime = post.date;
                        } else {
                            displayTime = lang === 'ko' ? 'ë‚ ì§œ ì—†ìŒ' : 'No date';
                        }
                        
                        const postElement = document.createElement('div');
                        postElement.className = 'post-item';
                        postElement.dataset.postId = postId;
                        
                        // âœ¨ ìƒˆ ê²Œì‹œê¸€ í•˜ì´ë¼ì´íŠ¸ (ìµœê·¼ 1ì‹œê°„ ë‚´)
                        const isNewPost = post.createdAt && 
                            (Date.now() - post.createdAt.toDate().getTime()) < 3600000;
                        if (isNewPost && !lastVisiblePost && index < 3) {
                            postElement.classList.add('new-post');
                        }
                        
                        postElement.innerHTML = `
                            <div class="post-header">
                                <!-- ë°ìŠ¤í¬í†±: ê¸°ì¡´ í•œ ì¤„ ë ˆì´ì•„ì›ƒ ìœ ì§€ -->
                                <div class="post-title-row hidden sm:contents">
                                    <div class="post-title" onclick="togglePostContent('${postId}')">${post.title}</div>
                                    <div class="post-meta">
                                        <span class="post-nickname">${post.nickname}</span>
                                        <span class="text-gray-400">|</span>
                                        <span>${displayTime}</span>
                                    </div>
                                    <div class="post-actions">
                                        <button onclick="showEditForm('${postId}', '${post.title.replace(/'/g, "\\'")}', '${(post.content || '').replace(/'/g, "\\'")}')" 
                                                class="btn-small btn-edit" 
                                                data-i18n="lounge_edit_btn">Edit</button>
                                        <button onclick="deletePost('${postId}')" 
                                                class="btn-small btn-delete" 
                                                data-i18n="lounge_delete_btn">Delete</button>
                                    </div>
                                </div>
                                
                                <!-- ëª¨ë°”ì¼ìš©: 2ì¤„ ë ˆì´ì•„ì›ƒ -->
                                <div class="sm:hidden">
                                    <div class="post-title-row flex justify-between items-center mb-2">
                                        <div class="post-title flex-1" onclick="togglePostContent('${postId}')">${post.title}</div>
                                    </div>
                                    <div class="post-meta-row flex justify-between items-center text-xs text-gray-500 pt-1 border-t border-gray-100">
                                        <span class="post-nickname">${post.nickname}</span>
                                        <span>${displayTime}</span>
                                    </div>
                                </div>
                            </div>
                            <div id="content-${postId}" class="post-content">
                                <div class="p-3 bg-gray-50 rounded text-sm text-gray-700">
                                    <p class="whitespace-pre-wrap">${post.content || (lang === 'ko' ? 'ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.' : 'No content available.')}</p>
                                    <!-- ëª¨ë°”ì¼ì—ì„œ ë‚´ìš© í¼ì³¤ì„ ë•Œë§Œ ì•¡ì…˜ ë²„íŠ¼ í‘œì‹œ -->
                                    <div class="post-actions sm:hidden mt-3 flex justify-end gap-2">
                                        <button onclick="showEditForm('${postId}', '${post.title.replace(/'/g, "\\'")}', '${(post.content || '').replace(/'/g, "\\'")}')" 
                                                class="btn-small btn-edit" 
                                                data-i18n="lounge_edit_btn">Edit</button>
                                        <button onclick="deletePost('${postId}')" 
                                                class="btn-small btn-delete" 
                                                data-i18n="lounge_delete_btn">Delete</button>
                                    </div>
                                </div>
                            </div>
                        `;
                        postList.appendChild(postElement);
                        
                        // ë²ˆì—­ ì ìš©
                        const editBtns = postElement.querySelectorAll('[data-i18n="lounge_edit_btn"]');
                        const deleteBtns = postElement.querySelectorAll('[data-i18n="lounge_delete_btn"]');
                        
                        editBtns.forEach(btn => {
                            if (currentTranslations.lounge_edit_btn) {
                                btn.textContent = currentTranslations.lounge_edit_btn;
                            }
                        });
                        deleteBtns.forEach(btn => {
                            if (currentTranslations.lounge_delete_btn) {
                                btn.textContent = currentTranslations.lounge_delete_btn;
                            }
                        });
                    });
                    
                    // âœ¨ ë”ë³´ê¸° ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€
                    if (loadMoreBtn && snapshot.size >= 5 && hasMorePosts) {
                        loadMoreBtn.classList.remove('hidden');
                        loadMoreBtn.disabled = false;
                        loadMoreBtn.textContent = currentTranslations.load_more_posts;
                    } else if (loadMoreBtn && !hasMorePosts) {
                        loadMoreBtn.textContent = currentTranslations.all_posts_loaded || 'All posts loaded';
                        loadMoreBtn.disabled = true;
                    }
                    
                    console.log('âœ… ê²Œì‹œê¸€ ë Œë”ë§ ì™„ë£Œ');
                    
                } catch (error) {
                    console.error("âŒ ê²Œì‹œê¸€ ë¡œë”© ì—ëŸ¬:", error);
                    if (postList) {
                        postList.innerHTML = `<div class="text-center py-8 text-gray-500">${currentTranslations.news_error}</div>`;
                    }
                } finally {
                    isLoadingPosts = false;
                    if (postsLoading) {
                        postsLoading.classList.add('hidden');
                    }
                }
            }

            // âœ¨ ìƒˆë¡œ ì¶”ê°€: ë”ë³´ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
            if (loadMoreBtn) {
                loadMoreBtn.addEventListener('click', () => {
                    if (!isLoadingPosts && hasMorePosts) {
                        renderPosts(document.documentElement.lang, false);
                    }
                });
            }
            
            // âœ¨ ìˆ˜ì •: ê²Œì‹œê¸€ ë‚´ìš© í† ê¸€ í•¨ìˆ˜ - ëª¨ë°”ì¼ ë²„íŠ¼ í‘œì‹œ ë¡œì§ ì¶”ê°€
            window.togglePostContent = function(postId) {
                const contentElement = document.getElementById(`content-${postId}`);
                const postElement = document.querySelector(`[data-post-id="${postId}"]`);
                
                if (contentElement) {
                    contentElement.classList.toggle('expanded');
                    
                    // ëª¨ë°”ì¼ì—ì„œ ë‚´ìš© í¼ì³¤ì„ ë•Œ ë²„íŠ¼ í‘œì‹œ í´ë˜ìŠ¤ ì¶”ê°€
                    if (postElement) {
                        if (contentElement.classList.contains('expanded')) {
                            postElement.classList.add('content-expanded');
                        } else {
                            postElement.classList.remove('content-expanded');
                        }
                    }
                }
            };
            
            // ìˆ˜ì • í¼ í‘œì‹œ í•¨ìˆ˜
            window.showEditForm = function(postId, title, content) {
                currentEditingPostId = postId;
                
                document.getElementById('edit-title').value = title;
                document.getElementById('edit-content-field').value = content;
                document.getElementById('edit-password').value = '';
                
                // ë‹¤ë¥¸ í¼ë“¤ ìˆ¨ê¸°ê¸°
                postFormContainer.classList.add('hidden');
                newPostBtn.classList.remove('hidden');
                
                // ìˆ˜ì • í¼ í‘œì‹œ
                editFormContainer.classList.remove('hidden');
            };
            
            // ê²Œì‹œê¸€ ì‚­ì œ í•¨ìˆ˜
            window.deletePost = async function(postId) {
                const lang = document.documentElement.lang;
                const confirmMessage = lang === 'ko' ? 
                    'ì •ë§ë¡œ ì´ ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?' : 
                    'Are you sure you want to delete this post?';
                
                if (!confirm(confirmMessage)) return;
                
                const password = prompt(lang === 'ko' ? 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:' : 'Enter password:');
                if (!password) return;
                
                try {
                    const doc = await postsCollection.doc(postId).get();
                    if (doc.exists && doc.data().password === password) {
                        await postsCollection.doc(postId).delete();
                        console.log('âœ… ê²Œì‹œê¸€ ì‚­ì œ ì„±ê³µ');
                        
                        // ì‚­ì œëœ ê²Œì‹œê¸€ì„ ë¡œë“œëœ ëª©ë¡ì—ì„œ ì œê±°
                        loadedPostIds.delete(postId);
                        renderPosts(lang, true);
                        
                        const successMessage = lang === 'ko' ? 'ê²Œì‹œê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.' : 'Post deleted successfully.';
                        alert(successMessage);
                    } else {
                        const errorMessage = lang === 'ko' ? 'ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.' : 'Incorrect password.';
                        alert(errorMessage);
                    }
                } catch (error) {
                    console.error('âŒ ê²Œì‹œê¸€ ì‚­ì œ ì—ëŸ¬:', error);
                    const errorMessage = lang === 'ko' ? 'ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.' : 'Failed to delete post.';
                    alert(errorMessage);
                }
            };

            // ìƒˆ ê¸€ì“°ê¸° ë²„íŠ¼
            newPostBtn.addEventListener('click', () => {
                postFormContainer.classList.remove('hidden');
                editFormContainer.classList.add('hidden');
                newPostBtn.classList.add('hidden');
            });

            // ì·¨ì†Œ ë²„íŠ¼
            cancelPostBtn.addEventListener('click', () => {
                postFormContainer.classList.add('hidden');
                newPostBtn.classList.remove('hidden');
                clearForm();
            });
            
            // ìˆ˜ì • ì·¨ì†Œ ë²„íŠ¼
            cancelEditBtn.addEventListener('click', () => {
                editFormContainer.classList.add('hidden');
                currentEditingPostId = null;
                clearEditForm();
            });
            
            // ìˆ˜ì • ì €ì¥ ë²„íŠ¼
            saveEditBtn.addEventListener('click', async () => {
                if (!currentEditingPostId) return;
                
                const password = document.getElementById('edit-password').value.trim();
                const title = document.getElementById('edit-title').value.trim();
                const content = document.getElementById('edit-content-field').value.trim();
                
                if (!password || !title || !content) {
                    alert('Please fill in all fields. / ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                try {
                    const doc = await postsCollection.doc(currentEditingPostId).get();
                    if (doc.exists && doc.data().password === password) {
                        await postsCollection.doc(currentEditingPostId).update({
                            title: title,
                            content: content,
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                        
                        console.log('âœ… ê²Œì‹œê¸€ ìˆ˜ì • ì„±ê³µ');
                        renderPosts(document.documentElement.lang, true);
                        editFormContainer.classList.add('hidden');
                        currentEditingPostId = null;
                        clearEditForm();
                        
                        const lang = document.documentElement.lang;
                        const successMessage = lang === 'ko' ? 'ê²Œì‹œê¸€ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.' : 'Post updated successfully.';
                        alert(successMessage);
                    } else {
                        const lang = document.documentElement.lang;
                        const errorMessage = lang === 'ko' ? 'ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.' : 'Incorrect password.';
                        alert(errorMessage);
                    }
                } catch (error) {
                    console.error('âŒ ê²Œì‹œê¸€ ìˆ˜ì • ì—ëŸ¬:', error);
                    const lang = document.documentElement.lang;
                    const errorMessage = lang === 'ko' ? 'ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.' : 'Failed to update post.';
                    alert(errorMessage);
                }
            });

            // ê¸€ ë“±ë¡ ë²„íŠ¼ - ì„œë²„ íƒ€ì„ìŠ¤íƒ¬í”„ ì ìš©
            submitPostBtn.addEventListener('click', async () => {
                const nickname = document.getElementById('post-nickname').value.trim();
                const password = document.getElementById('post-password').value.trim();
                const title = document.getElementById('post-title').value.trim();
                const content = document.getElementById('post-content').value.trim();

                if (!nickname || !password || !title || !content) {
                    alert('Please fill in all fields. / ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                console.log('ğŸ“ ìƒˆ ê²Œì‹œê¸€ ì‘ì„± ì‹œì‘');
                
                const newPost = {
                    nickname,
                    password, // ì£¼ì˜: ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ì•”í˜¸í™” í•„ìš”
                    title,
                    content,
                    // ì„œë²„ íƒ€ì„ìŠ¤íƒ¬í”„ë¡œ ì €ì¥ (UTC ê¸°ì¤€)
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    // ê¸°ì¡´ ë°ì´í„° í˜¸í™˜ì„±ì„ ìœ„í•´ date í•„ë“œë„ ìœ ì§€
                    date: new Date().toISOString().split('T')[0],
                    // ì¶”ê°€ ì •ë³´: ì‘ì„±ìì˜ ì‹œê°„ëŒ€ ì •ë³´ (ì„ íƒì‚¬í•­)
                    authorTimezone: Intl.DateTimeFormat().resolvedOptions().timeZone
                };
                
                try {
                    await postsCollection.add(newPost);
                    console.log('âœ… ê²Œì‹œê¸€ ì €ì¥ ì„±ê³µ');
                    
                    // ìƒˆ ê¸€ ì‘ì„± í›„ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                    renderPosts(document.documentElement.lang, true);
                    postFormContainer.classList.add('hidden');
                    newPostBtn.classList.remove('hidden');
                    clearForm();
                } catch (error) {
                    console.error("âŒ ê²Œì‹œê¸€ ì €ì¥ ì—ëŸ¬:", error);
                    alert("Failed to post. Please try again. / ê¸€ì„ ë“±ë¡í•˜ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                }
            });
            
            // í¼ ì´ˆê¸°í™” í•¨ìˆ˜
            function clearForm() {
                document.getElementById('post-nickname').value = '';
                document.getElementById('post-password').value = '';
                document.getElementById('post-title').value = '';
                document.getElementById('post-content').value = '';
            }
            
            // ìˆ˜ì • í¼ ì´ˆê¸°í™” í•¨ìˆ˜
            function clearEditForm() {
                document.getElementById('edit-password').value = '';
                document.getElementById('edit-title').value = '';
                document.getElementById('edit-content-field').value = '';
            }

            // âœ¨ ì¶”ê°€: Pi ë¸”ë¡œê·¸ ìƒíƒœ í™•ì¸ í•¨ìˆ˜ (ë””ë²„ê¹…ìš©)
            window.checkPiBlogStatus = async function() {
                try {
                    console.log('ğŸ” Pi ë¸”ë¡œê·¸ ìƒíƒœ í™•ì¸ ì¤‘...');
                    const checkStatus = functions.httpsCallable('checkPiBlogStatus');
                    const result = await checkStatus();
                    
                    console.log('ğŸ“Š Pi ë¸”ë¡œê·¸ ìƒíƒœ:', result.data);
                    return result.data;
                } catch (error) {
                    console.error('âŒ Pi ë¸”ë¡œê·¸ ìƒíƒœ í™•ì¸ ì‹¤íŒ¨:', error);
                    return null;
                }
            };

            // âœ¨ í˜ì´ì§€ ì–¸ë¡œë“œ ì‹œ ë¦¬ìŠ¤ë„ˆ ì •ë¦¬
            window.addEventListener('beforeunload', () => {
                if (postsListener) {
                    postsListener();
                }
            });

            // ì´ˆê¸°í™” ìˆœì„œ ë³€ê²½ (JavaScript ì˜¤ë¥˜ ë°©ì§€)
            // 1. ì–¸ì–´ ì„¤ì •
            changeLanguage(initialLang);
            
            // 2. í†µê³„ ì´ˆê¸°í™”
            updateVisitorStats();
            loadStats();
            
            // 3. ë‰´ìŠ¤ ë¡œë”©
            fetchNews();
            setInterval(fetchNews, 3600000); // 1ì‹œê°„ë§ˆë‹¤ ë‰´ìŠ¤ ì—…ë°ì´íŠ¸
            
            // 4. í†µê³„ ì •ê¸° ì—…ë°ì´íŠ¸ (10ë¶„ë§ˆë‹¤)
            setInterval(loadStats, 600000);
            
            // 5. âœ¨ ìƒˆë¡œ ì¶”ê°€: ê²Œì‹œíŒ ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
            setupPostsListener(initialLang);
        });
    </script>
</body>
</html>